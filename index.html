<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Cuckoo by nazomikan</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Cuckoo</h1>
        <p></p>

        <p class="view"><a href="https://github.com/nazomikan/Cuckoo">View the Project on GitHub <small>nazomikan/Cuckoo</small></a></p>


        <ul>
          <li><a href="https://github.com/nazomikan/Cuckoo/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/nazomikan/Cuckoo/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/nazomikan/Cuckoo">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><a href="https://travis-ci.org/nazomikan/Cuckoo"><img src="https://travis-ci.org/nazomikan/Cuckoo.png?branch=master" alt="Build Status"></a>
<img src="http://nazomikan.com/images/storage/cuckoo.jpg" alt="cuckoo"></p>

<h2>Description</h2>

<p>This is a library to the code that is easy to test the code hard to test.</p>

<p>It is also possible to secretly substitute to mock a module code under test calls as brood parasitism of the cuckoo.</p>

<p>In addition, cuckoo can change untestable code (the local function and local variables that are not exported to the outside) to testable.</p>

<h2>Usage</h2>

<p>install cuckoo via npm first:</p>

<pre><code>npm install cuckoo
</code></pre>

<p>and then include it in your project with:</p>

<pre><code>var cuckoo = require('cuckoo');
</code></pre>

<h2>Example</h2>

<p>target.js</p>

<pre><code>var util = require('util');

function untestableMethod() {
　　util.isArray([1, 2, 3]);
}

exports.testableMethod() {
  return 1;
}
</code></pre>

<p>target-test.js</p>

<pre><code>var cuckoo = require('cuckoo')
  , assert = require('assert')
  ;

describe('#untestableMethod', function () {
  it('should have set the array to util#isArray', function () {
    var target
      , expect = [1, 2, 3]
      , mock = {}
      ;

    mock.util = {
      isArray: function (ary) {
        assert.deepEqual([1, 2, 3], ary); // pass
      }
    };

    target = cuckoo.load('./target.js', mock),
    target.private.untestableMethod();
  });
});

describe('#testableMethod', function () {
  it('should get 1', function () {
    var target = cuckoo.load('./target.js')
      ;

    assert.equal(1, target.public.testableMethod());
  });
});
</code></pre>

<h2>API</h2>

<h3>cuckoo#load(filePath, [mocks])</h3>

<p><a href="https://github.com/param" class="user-mention">@param</a> String <code>filePath</code> File path of the test target</p>

<p><a href="https://github.com/param" class="user-mention">@param</a> Object <code>[mocks]</code> replace mock when the <code>require</code> is called</p>

<p><a href="https://github.com/return" class="user-mention">@return</a> Object</p>

<pre><code>{
  context: "Variable object under test",
  private: "Variable object under test",
  public: "Public methods of test",
  module: "Module object under test"
}
</code></pre>

<h2>License</h2>

<p>MIT</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/nazomikan">nazomikan</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>